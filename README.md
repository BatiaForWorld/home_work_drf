# Django REST Framework

Домашнее задание на тему:

### Вьюсеты и дженерики (viewsets and generics)

и

### Сериализаторы

Для установки проекта создайте проект и импортируйте его по ссылке github

Создайте виртуальное окружение

```bash
python3.13 -m venv .venv
```

Установите зависимости из файла requirements.txt

```bash
pip install -r requirements.txt
```

Заполните файл .env по примеру env.example, указав данные для соединения с БД postgreSQL.

Выполните миграции

```bash
python3 manage.py migrate
```

Загрузите фикстуры для заполнения БД

```bash
python3 manage.py loaddata users/fixtures/users.json
python3 manage.py loaddata courses/fixtures/courses.json
python3 manage.py loaddata courses/fixtures/lessons.json
python3 manage.py loaddata users/fixtures/payments.json
```

Скачайте [Postman](https://dl.pstmn.io/download/latest/linux_64) для вашего дистрибутива Linux, распакуйте в удобную для
вас папку и запустите

# Права доступа в DRF 
## JWT

### Фикстуры
Для добавления группы модераторов используйте фикстуру [users/fixtures/groups.json](users/fixtures/groups.json).

Пример применения:

```bash
python3 manage.py loaddata users/fixtures/groups.json
```
Создайте администратора:
```commandline
python3 manage.py createsuperuser
```
После загрузки фикстуры назначайте пользователей в группу moderators через админ-панель.

### Возможности проекта
- Регистрация пользователей и JWT-аутентификация.
- CRUD для пользователей (публичный и полный профиль в зависимости от владельца).
- CRUD для курсов и уроков.
- Разграничение прав: модераторы могут просматривать и редактировать любые курсы и уроки, но не создавать и не удалять.
- Пользователи, не входящие в группу модераторов, видят и изменяют только свои курсы и уроки.

# Валидаторы, пагинация и тесты

Для сохранения уроков и курсов реализована дополнительная проверка на отсутствие в материалах ссылок на сторонние ресурсы, 
кроме youtube.com.
То есть ссылки на видео можно прикреплять в материалы, 
а ссылки на сторонние образовательные платформы или личные сайты — нельзя.

Добавлена модель подписки на обновления курса для пользователя. 

Реализован эндпоинт для установки подписки пользователя и на удаление подписки у пользователя.

Реализована пагинация для вывода всех уроков и курсов.

Написаны тесты, которые проверяют корректность работы CRUD уроков и функционал работы подписки на обновления курса.

Сохранены результат проверки покрытия тестами.

### Что бы запустить тесты введите команду:

```commandline
python3 manage.py test
```

### Чтобы сохранить отчет о покрытии тестами в определенную папку, например, в папку htgmlcov,
нужно выполнить следующие шаги:

Запустить тесты только для ****courses****, выполните:

```commandline
python manage.py test courses
```
Отчёт о покрытии:

```commandline
coverage report
```

Запустить тесты с подсчетом покрытия:

```commandline
coverage run --source='.' manage.py test
```

Сохранить отчет в папку htgmlcov:

```commandline
coverage html -d htgmlcov
```


Автор: Казанцев Андрей




